<div id="rfm-table" 
  class="mb-8 items-end text-sm"
  data-controller="rfm-table"
  >
  <div class="p-2">
    <div mb-2>&nbsp;</div>
    <% @rfm_data.keys.each do |group_name| %>
      <div class="flex gap-2 items-center mb-2 pb-2 border-b border-b-gray-100">
        <span class="color-icon <%= group_name %>"></span><%= group_name.to_s.humanize %>
      </div>
    <% end %>
  </div> <!-- group -->

  <div class="p-2 text-right">
    <div class="mb-2 font-semibold text-gray-700">customers</div>
    <% @rfm_data.values.each do |v| %> 
      <div class="mb-2 pb-2 border-b border-b-gray-100"><%= v[:customers] %></div>
    <% end %>
  </div> <!-- customers -->

  <div class="py-2 px-4 bg-gray-50 rounded">
    <div class="flex gap-3 p-3 bg-gray-200 rounded-md mb-4 col-span-3 h-min justify-center">
      <button 
        data-action="rfm-table#viewSection"
        data-rfm-table-section-param="sectionR"
        class="px-3 py-1 rounded-md bg-white shadow font-medium text-gray-700">R</button>
      <button 
        data-action="rfm-table#viewSection"
        data-rfm-table-section-param="sectionF"
        class="px-3 py-1 rounded-md bg-white shadow font-medium text-gray-700">F</button>
      <button 
        data-action="rfm-table#viewSection"
        data-rfm-table-section-param="sectionM"
        class="px-3 py-1 rounded-md bg-white shadow font-medium text-gray-700">M</button>
    </div>

    <div 
      data-rfm-table-target="sectionR"
      class="rfm-values">
      <div class="grid grid-cols-[80px_1fr] gap-x-4">
        <div class="mb-2 font-semibold text-gray-700 text-right">days</div>
        <div></div>
      </div>
      <% @rfm_data.values.each do |v| %> 
        <div class="grid grid-cols-[80px_1fr] gap-x-4 items-center">
          <div class="text-right mb-2 pb-2 border-b border-b-gray-100"><%= v[:days] %></div>
          <div class="text-sm mb-2 bg-gray-200 w-full rounded-full h-[14px]"></div>
        </div>
      <% end %>
    </div> <!-- rfm-values -->

    <div 
      data-rfm-table-target="sectionF"
      class="rfm-values hidden">
      <div class="grid grid-cols-[80px_1fr] gap-x-4">
        <div class="mb-2 font-semibold text-gray-700 text-right">orders</div>
        <div></div>
      </div>
      <% @rfm_data.values.each do |v| %> 
        <div class="grid grid-cols-[80px_1fr] gap-x-4 items-center">
          <div class="text-right mb-2 pb-2 border-b border-b-gray-100"><%= v[:avrg_orders].round(2) %></div>
          <div class="text-sm mb-2 bg-gray-200 w-full rounded-full h-[14px]"></div>
        </div>
      <% end %>
    </div> <!-- rfm-values -->

    <div 
      data-rfm-table-target="sectionM"
      class="rfm-values hidden">
      <div class="grid grid-cols-[80px_1fr] gap-x-4">
        <div class="mb-2 font-semibold text-gray-700 text-right">amount</div>
        <div></div>
      </div>
      <% @rfm_data.values.each do |v| %> 
        <div class="grid grid-cols-[80px_1fr] gap-x-4 items-center">
          <div class="text-right mb-2 pb-2 border-b border-b-gray-100"><%= number_with_delimiter v[:avrg_spent].round(0) %></div>
          <div class="text-sm mb-2 bg-gray-200 w-full rounded-full h-[14px]"></div>
        </div>
      <% end %>
    </div> <!-- rfm-values -->
  </div>
</div> <!-- rfm-table -->

